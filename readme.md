
 # storch pickle  for scala3 interoperate with python
 ## read and write python pickle file accelerate storch scala3 deep learning framework for pickle tensor and model dump and load

## Overview
`storch-pickle` is a Scala 3 library designed to serialize and deserialize objects using the Python-compatible Pickle protocol. It enables seamless interoperability between Scala and Python by allowing the reading and writing of `.pkl`, `.pt`, and `.pth` files. This library supports common Pickle function operations and is continuously evolving to support more features in the future.

## Features
- **Cross - Language Compatibility**: Read and write Pickle files generated by Python, and vice versa.
- **Scala 3 Support**: Leverage the latest features of Scala 3 for efficient and concise code.
- **Common Pickle Operations**: Support basic serialization and deserialization operations.

## Getting Started

### Prerequisites
- Scala 3.6.4 or higher
- SBT (Scala Build Tool)

### Installation
Add the following settings to your `build.sbt` file:
```scala 3
sbt compile

libraryDependencies += "io.github.mullerhai" % "storch-pickle_3" % "0.1.0"
````
```scala 3
import java.io.IOException
import scala.collection.mutable
import torch.pickle.Pickler

object PickleExample {
  @throws[IOException]
  def main(args: Array[String]): Unit = {
    val map = new mutable.HashMap[String, Any]
    map.put("apple", 42)
    map.put("microsoft", "hello")
    val mk = Seq(34, 12, 45)
    map.put("mk", mk)
    val mk3 = Seq(12.5f, 34.9f, 20f, 902f)
    map.put("listMk", mk3)
    val values = mutable.ListBuffer[Double](23.11, 1.13, 1.11, 2.22, 3.33, 4.44, 5.55)
    map.put("listvalues", values.toSeq)

    val pickleFilename = "testpickle6.dat"
    println(s"Writing pickle to '$pickleFilename'")
    val pickler = new Pickler(true)
    pickler.save(map, pickleFilename)
    println("Done. Try unpickling it in python.\n")
  }
}
```

```scala 3
import java.io.IOException
import scala.collection.mutable
import torch.pickle.Unpickler

object PickleExample {
  @throws[IOException]
  def main(args: Array[String]): Unit = {
    // Python - generated pickle data
    val pythonpickle = Array[Byte](
      128.toByte, 4, 149.toByte, 48, 0, 0, 0, 0, 0, 0, 0, 93, 148.toByte, 40, 75, 1, 75, 2, 75, 3, 75, 11, 75, 12, 75, 13, 135.toByte, 148.toByte, 143.toByte, 148.toByte, 40, 140.toByte, 6, 98, 97, 110, 97, 110, 97, 148.toByte, 140.toByte, 5, 103, 114, 97, 112, 101, 148.toByte, 140.toByte, 5, 97, 112, 112, 108, 101, 148.toByte, 144.toByte, 101, 46
    )
    val unpickler = new Unpickler
    val result = unpickler.loads(pythonpickle)
    println(s"Unpickled result: $result")
  }
}

```


## Future Development
### We plan to expand the functionality of storch-pickle in the following ways:

Support for more advanced Pickle protocol versions.
Enhanced performance optimization for large - scale serialization and deserialization.
Additional custom serialization and deserialization hooks for user - defined types.

## Contributing
Contributions are welcome! If you have any ideas, bug reports, or feature requests, please open an issue or submit a pull request on our GitHub repository.

## License
This project is licensed under the Apache 2.0 License. See the LICENSE file for details